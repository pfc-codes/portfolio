---
import Layout from "../../layouts/Layout.astro";
import { projects, type Facet } from "../../data/projects";

const { facet, slug } = Astro.params as { facet: string; slug: string };

const facetOk = facet === "web" || facet === "vfx" || facet === "3d";
if (!facetOk) return Astro.redirect("/");

const project = projects.find(p => p.slug === slug && p.primaryFacet === (facet as Facet));
if (!project) return Astro.redirect(`/${facet}/`);

const facetLabel =
  project.facets.includes("web") && project.facets.includes("vfx") && project.facets.includes("3d")
    ? "web · vfx · 3d"
    : project.facets.join(" · ");
---
<Layout title={`phro.design — ${project.title}`} description={`${project.year} · ${project.client}`}>
  <main style="padding: clamp(24px, 5vw, 72px); max-width: 1100px;">
    <div style="letter-spacing: .18em; text-transform: uppercase; font-size: 12px; color: rgba(255,255,255,.55);">
      {facet} / {project.slug}
    </div>

    <h1 style="margin-top: 14px; font-weight: 300; letter-spacing: -0.02em; font-size: clamp(34px, 4.2vw, 56px); line-height: 1.05;">
      {project.title}
    </h1>

    <div style="margin-top: 12px; color: rgba(255,255,255,.62); font-size: 14px; line-height: 1.6;">
      <div>{project.year} · {project.client}</div>
      <div style="margin-top: 6px;">{facetLabel}</div>
    </div>

    <div style="margin-top: 26px; border: 1px solid rgba(255,255,255,.10); border-radius: 18px; overflow: hidden;">
      <img src={project.hoverImage} alt="" style="display:block; width:100%; height:auto; opacity:.92;" />
    </div>

    <section style="margin-top: 28px; max-width: 70ch; color: rgba(255,255,255,.68); line-height: 1.75;">
      <p>
        Journal / process area goes here. Replace this with your write-up, stills, breakdowns, and embeds.
      </p>
    </section>

    <nav style="margin-top: 28px; display:flex; gap: 18px; flex-wrap: wrap;">
      <a href={`/${facet}/`} data-transition="left" style="color: rgba(255,255,255,.82); text-decoration:none; letter-spacing:.18em; text-transform:uppercase; font-size: 12px;">
        Back to {facet}
      </a>
      <a href="/" data-transition="left" style="color: rgba(255,255,255,.82); text-decoration:none; letter-spacing:.18em; text-transform:uppercase; font-size: 12px;">
        Home
      </a>
    </nav>
  </main>
</Layout>
